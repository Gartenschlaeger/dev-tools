<app-page-header title="{{ pageTitle }}"></app-page-header>

<form [formGroup]="form" (submit)="submitHandler()">
	<app-form-section>
		<app-form-textfield label="URL" formControlName="url" placeholder="http(s)://"></app-form-textfield>
	</app-form-section>

	<app-form-section title="Details" *ngIf="result">
		<div class="mb-3">
			<span class="font-semibold inline-block mb-1 w-full">Host</span>
			<app-code>{{ result?.hostname }}</app-code>
		</div>
		<div class="mb-3" *ngIf="result.port">
			<span class="font-semibold inline-block mb-1 w-full">Port</span>
			<app-code>{{ result.port }}</app-code>
		</div>

		<div class="mb-3" *ngIf="result.path">
			<span class="font-semibold inline-block mb-1 w-full">Path</span>
			<app-code>{{ result.path }}</app-code>
		</div>

		<div class="mb-3" *ngIf="result.queryString">
			<span class="font-semibold inline-block mb-1 w-full">Query strings</span>
			<div class="flex gap-1 items-center">
				<div class="flex-1 overflow-hidden">
					<app-code>{{ result.queryString }}</app-code>
				</div>
				<div class="flex-none">
					<button class="btn-rounded" (click)="handleToogleSearchDetails()">
						<app-svg-icon type="arrowDown" *ngIf="showQueryDetails"></app-svg-icon>
						<app-svg-icon type="arrowRight" *ngIf="!showQueryDetails"></app-svg-icon>
					</button>
				</div>
			</div>
		</div>

		<div class="mb-3 ml-5 space-y-2" *ngIf="showQueryDetails">
			<div *ngFor="let q of result.queryStringValues">
				<span class="font-semibold inline-block mb-1 w-full">{{ q.name }}</span>
				<app-code>{{ q.value }}</app-code>
			</div>
		</div>

		<div class="mb-3" *ngIf="result?.fragment">
			<span class="font-semibold inline-block mb-1 w-full">Fragment</span>
			<app-code>{{ result?.fragment }}</app-code>
		</div>
	</app-form-section>

	<app-alert *ngIf="hasError" type="error">Failed to parse URL</app-alert>

	<app-form-footer>
		<button type="button" class="btn-secondary" (click)="handleReset()">Reset</button>
		<button type="submit" class="btn-primary">Analyze</button>
	</app-form-footer>
</form>
