<app-page-header title="URL Analyzer"></app-page-header>

<form [formGroup]="form" (submit)="handleSubmit()">
	<app-form-section>
		<app-form-textfield label="URL" formControlName="url" placeholder="http(s)://"></app-form-textfield>
	</app-form-section>

	<app-form-footer>
		<button type="button" class="btn-secondary" (click)="handleReset()">Reset</button>
		<button type="submit" class="btn-primary">Analyze</button>
	</app-form-footer>

	<app-form-section title="Details" *ngIf="result">
		<div class="mb-3">
			<app-form-label>Host</app-form-label>
			<app-code>{{ result.hostname }}</app-code>
		</div>
		<div class="mb-3" *ngIf="result.port">
			<app-form-label>Port</app-form-label>
			<app-code>{{ result.port }}</app-code>
		</div>

		<div class="mb-3" *ngIf="result.path">
			<app-form-label>Path</app-form-label>
			<app-code>{{ result.path }}</app-code>
		</div>

		<div class="mb-3" *ngIf="result.queryString">
			<app-form-label>Query strings</app-form-label>
			<div class="flex gap-1 items-center">
				<div class="flex-1 overflow-hidden">
					<app-code>{{ result.queryString }}</app-code>
				</div>
				<div class="flex-none">
					<button class="btn-misc btn-sm rounded-full" (click)="handleToogleSearchDetails()">
						<!-- <app-svg-icon type="arrowDown" *ngIf="showQueryDetails"></app-svg-icon>
						<app-svg-icon type="arrowRight" *ngIf="!showQueryDetails"></app-svg-icon> -->
					</button>
				</div>
			</div>
		</div>

		<div class="mb-3 ml-5 space-y-2" *ngIf="showQueryDetails">
			<div *ngFor="let q of result.queryStringValues">
				<app-form-label>{{ q.name }}</app-form-label>
				<app-code>{{ q.value }}</app-code>
			</div>
		</div>

		<div class="mb-3" *ngIf="result?.fragment">
			<app-form-label>Fragment</app-form-label>
			<app-code>{{ result.fragment }}</app-code>
		</div>
	</app-form-section>

	<app-alert *ngIf="hasError" type="error">Failed to parse URL</app-alert>
</form>
